WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/dropdown/Dropdown.js' */
define("jira/dropdown",["require"],(function(i){"use strict";var o=i("jira/util/top-same-origin-window")(window),n=i("jira/ajs/layer/layer-interactions"),e=i("jquery"),t=i("jira/util/key-code"),d=[];var r={current:null,addInstance:function(){d.push(this)},hideInstances:function(){var i=this;e(d).each((function(){i!==this&&this.hideDropdown()}))},getHash:function(){this.hash||(this.hash={container:this.dropdown,hide:this.hideDropdown,show:this.displayDropdown});return this.hash},displayDropdown:function(){if(this.current!==this){this.hideInstances();this.current=this;this.dropdown.css({display:"block"});this.displayed=!0;var i=this.dropdown;(function(){try{return Boolean(o.require("jira/dialog/dialog").current)}catch(i){}return!1})()||setTimeout((function(){var o=e(window),n=i.offset().top+i.prop("offsetHeight")-o.height()+10;o.scrollTop()<n&&e("html,body").animate({scrollTop:n},300,"linear")}),100)}},hideDropdown:function(){if(!1!==this.displayed){this.current=null;this.dropdown.css({display:"none"});this.displayed=!1}},init:function(i,o){var n=this;this.addInstance(this);this.dropdown=e(o);this.dropdown.css({display:"none"});e(document).keydown((function(i){i.keyCode===t.TAB&&n.hideDropdown()}));if(i.target)e.aop.before(i,(function(){n.displayed||n.displayDropdown()}));else{n.dropdown.css("top",e(i).outerHeight()+"px");i.click((function(i){if(n.displayed)n.hideDropdown();else{n.displayDropdown();i.stopPropagation()}i.preventDefault()}))}e(document.body).click((function(){n.displayed&&n.hideDropdown()}))}};n.preventDialogHide(r);n.hideBeforeDialogShown(r);return r}));AJS.namespace("JIRA.Dropdown",null,require("jira/dropdown"));AJS.namespace("jira.widget.dropdown",null,require("jira/dropdown"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/AutoComplete.js' */
define("jira/autocomplete/autocomplete",["jira/ajs/ajax/smart-ajax","jira/util/key-code","jira/util/objects","jira/util/formatter","jquery"],(function(e,t,o,n,i){"use strict";return d={9:!0,13:!0,14:!0,25:!0,27:!0,38:!0,40:!0,224:!0},{dispatcher:function(){},getSavedResponse:function(){},saveResponse:function(){},renderSuggestions:function(){},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},set:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},completeField:function(e){if(e){this.field.val(e).focus();this.field.trigger("change")}},textToSuggestionCursorPosition:function(){return this.field.val()},_makeRequest:function(t){var n=this,i=o.copyObject(t);this.pendingRequest&&this.pendingRequest.abort();i.complete=function(){n.pendingRequest=null};i.error=function(e){!e.aborted&&0!==e.status&&t.error&&t.error.apply(this,arguments)};this.pendingRequest=e.makeRequest(i);return this.pendingRequest},addSuggestionControls:function(e){var o=this,r=function(e){void 0!==o.selectedIndex&&o.selectedIndex>-1&&o.suggestionNodes[o.selectedIndex][0].removeClass("active");o.selectedIndex=function(e,t){var n=!1===o.autoSelectFirst?-1:0;if(o.allowArrowCarousel)return e>t?n:e<n?t:e;if(e>t)return t;if(e<n){o.responseContainer.scrollTop(0);return n}return e}(e,o.suggestionNodes.length-1);o.selectedIndex>-1&&o.suggestionNodes[o.selectedIndex][0].addClass("active")},d=function(){return o.suggestionNodes&&o.suggestionNodes[o.selectedIndex]&&o.suggestionNodes[o.selectedIndex][0].hasClass("active")},a=function(e){var t=e.optionName,i=e.optionIndex,s=e.optionsLength;o.assistiveContainer.text(n.format("option {0}, {1} of {2}",t,i,s))};if(e.length){this.selectedIndex=0;this.suggestionNodes=e;for(var l=0;l<o.suggestionNodes.length;l++){var u={instance:this,index:l};this.suggestionNodes[l][0].bind("mouseover",u,p).bind("mouseout",u,c).bind("click",u,h).bind("mousedown",(function(e){e.preventDefault()}))}if(!this.keyboardHandlerBinded){i(this.field).keypress((function(e){if(o.responseContainer.is(":visible")&&e.keyCode===t.ENTER){d()&&!o.pendingRequest&&o.completeField(o.suggestionNodes[o.selectedIndex][1]);e.preventDefault();e.stopPropagation()}}));i(this.field).keydown((function(e){if(o.responseContainer.is(":visible")){o.field[0]!==document.activeElement&&o.field.focus();if(e.keyCode===t.DOWN){r(o.selectedIndex+1);if(o.selectedIndex>=0){var n=o.responseContainer.height(),i=o.suggestionNodes[o.selectedIndex][0].position().top+o.suggestionNodes[o.selectedIndex][0].outerHeight();i-n>0&&o.responseContainer.scrollTop(o.responseContainer.scrollTop()+i-n+2);a({optionName:o.suggestionNodes[o.selectedIndex][1],optionIndex:o.selectedIndex+1,optionsLength:o.suggestionNodes.length})}else o.responseContainer.scrollTop(0);e.preventDefault()}else if(e.keyCode===t.UP){r(o.selectedIndex-1);if(o.selectedIndex>=0){var s=o.suggestionNodes[o.selectedIndex][0].position().top;s<0&&o.responseContainer.scrollTop(o.responseContainer.scrollTop()+s-2);a({optionName:o.suggestionNodes[o.selectedIndex][1],optionIndex:o.selectedIndex+1,optionsLength:o.suggestionNodes.length})}e.preventDefault()}else if(e.keyCode===t.TAB)if(d()){o.completeField(o.suggestionNodes[o.selectedIndex][1]);e.preventDefault()}else o.dropdownController.hideDropdown()}}));this.keyboardHandlerBinded=!0}!1===o.autoSelectFirst?r(-1):r(0);s=this}function p(e){o.dropdownController.displayed&&r(e.data.index)}function c(e){0===e.data.index&&(o.selectedIndex=-1);i(this).removeClass("active")}function h(e){o.completeField(o.suggestionNodes[e.data.index][1])}},clearResponseContainer:function(){this.responseContainer.empty();this.suggestionNodes=void 0},delay:r=function e(t,o){if(e.t){clearTimeout(e.t);e.t=void 0}e.t=setTimeout(t,1e3*o)},buildResponseContainer:function(){var e=this.field.parent().addClass("atlassian-autocomplete");this.responseContainer=i(document.createElement("div"));this.responseContainer.addClass("suggestions");this.positionResponseContainer();this.responseContainer.appendTo(e);this.assistiveContainer=i(document.createElement("div"));this.assistiveContainer.attr({role:"status",class:"autocomplete-assistive assistive"});this.assistiveContainer.appendTo(e)},positionResponseContainer:function(){this.responseContainer.css({top:this.field.outerHeight()})},keyUpHandler:function(){function e(){this.responseContainer||this.buildResponseContainer();this.dispatcher(this.field.val())}return function(o){this.field.val().length>=this.minQueryLength&&(o.keyCode in d&&(!this.responseContainer||this.responseContainer.is(":visible")||o.keyCode!==t.UP&&o.keyCode!==t.DOWN)||e.call(this));return o}}(),addMultiSelectAdvice:function(e){var t=this,o=function e(o){if(!e.isAlerting){e.isAlerting=!0;var n=i(document.createElement("div")).css({float:"left",display:"none"}).addClass("warningBox").html("Oops! You have already entered the value <em>"+o+"</em>").appendTo(t.field.parent()).show("fast",(function(){t.delay((function(){n.hide("fast",(function(){n.remove();e.isAlerting=!1}))}),4)}))}};i.aop.before({target:this,method:"dispatcher"},(function(t){var o=this.field.val();t[0]=i.trim(o.slice(o.lastIndexOf(e)+1));return t}));i.aop.before({target:this,method:"completeField"},(function(t){var n=t[0],s=this.field.val().split(e),r=i(s).map((function(){return i.trim(this)})).get();if(!this.allowDuplicates&&new RegExp("(?:^|[\\s"+e+"])"+n+"\\s*"+e).test(this.field.val())){o(n);r[r.length-1]=""}else{r[r.length-1]=n;r[r.length]=""}t[0]=r.join(e.replace(/([^\s]$)/,"$1 "));return t}))},addDropdownAdvice:function(){i.aop.after({target:this,method:"buildResponseContainer"},(function(e){this.dropdownController=JIRA.Dropdown.AutoComplete({target:this,method:"renderSuggestions"},this.responseContainer);i.aop.after({target:this.dropdownController,method:"hideDropdown"},(function(){this.dropdown.removeClass("dropdown-ready");clearTimeout(r.t)}));return e}));i.aop.after({target:this,method:"renderSuggestions"},(function(e){if(e&&e.length>0){this.dropdownController.displayDropdown();this.maxHeight&&this.dropdownController.dropdown.prop("scrollHeight")>this.maxHeight?this.dropdownController.dropdown.css({height:this.maxHeight,overflowX:"visible",overflowY:"scroll"}):this.maxHeight&&this.dropdownController.dropdown.css({height:"",overflowX:"",overflowY:""});this.dropdownController.dropdown.addClass("dropdown-ready")}else this.dropdownController.hideDropdown();return e}));i.aop.after({target:this,method:"completeField"},this._afterCompleteField);i.aop.after({target:this,method:"keyUpHandler"},(function(e){if((!(this.field.val().length>=this.minQueryLength)||e.keyCode===t.ESCAPE)&&this.dropdownController&&this.dropdownController.displayed){this.dropdownController.hideDropdown();e.keyCode===t.ESCAPE&&e.stopPropagation()}return e}))},_afterCompleteField:function(e){this.dropdownController.hideDropdown();return e},init:function(e){var o=this;this.set(e);this.field=this.field||i("#"+this.fieldID);this.field.attr("autocomplete","off").keyup((function(e){o.disabled||o.keyUpHandler(e)})).keydown((function(e){e.keyCode===t.ESCAPE&&o.responseContainer&&o.responseContainer.is(":visible")&&e.preventDefault()})).click((function(){s===o&&setTimeout((function(){o.dispatcher(o.field.val())}),0)})).blur((function(){o.pendingRequest&&o.pendingRequest.abort()})).focus((function(e){o.responseContainer||o.buildResponseContainer();if(!o.disabled){e.originalEvent&&e.originalEvent.relatedTarget&&setTimeout((function(){o.dispatcher(o.field.val())}),0);s=o}}));this.addDropdownAdvice();e.delimChar&&this.addMultiSelectAdvice(e.delimChar)}};var s,r,d}));AJS.namespace("jira.widget.autocomplete",null,require("jira/autocomplete/autocomplete"));AJS.namespace("JIRA.AutoComplete",null,require("jira/autocomplete/autocomplete"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/RESTAutoComplete.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("jira/autocomplete/rest-autocomplete",["jira/autocomplete/autocomplete","jira/util/objects"],(function(e,t){"use strict";return function(){var o=t.begetObject(e);o.dispatcher=function(e){var t=this;if(!(e.length<this.minQueryLength))if(void 0!==this.responseContainer&&null!==this.responseContainer)if(this.getSavedResponse(e)){t.renderSuggestions(t.getSavedResponse(e));t.responseContainer.scrollTop(0)}else this.delay((function(){var o=t.getAjaxParams();o.data.query=e;o.success=function(o){t.saveResponse(e,o);t.responseContainer.scrollTop(0);t.renderSuggestions(o)};t._makeRequest(o)}),t.queryDelay);else console.warn("Response container was not initialized, skipping rendering")};o.getAjaxParams=function(){};o.getSavedResponse=function(e){this.requested||(this.requested={});return this.requested[e]};o.saveResponse=function(e,t){if("string"==typeof e&&"object"===(void 0===t?"undefined":_typeof(t))){this.requested||(this.requested={});this.requested[e]=t}};return o}()}));AJS.namespace("jira.widget.autocomplete.REST",null,require("jira/autocomplete/rest-autocomplete"));AJS.namespace("JIRA.RESTAutoComplete",null,require("jira/autocomplete/rest-autocomplete"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/IssueAutoComplete.js' */
define("jira/autocomplete/issue-autocomplete",["jira/data/parse-options-from-fieldset","jira/field/issue-picker","jira/autocomplete/rest-autocomplete","jira/util/objects","wrm/context-path","jquery"],(function(e,t,s,a,i,n){"use strict";var r=i(),d=function(e){var t=a.begetObject(s);t.getAjaxParams=function(){return{url:r+"/rest/api/2/issue/picker",data:e.ajaxData,dataType:"json",type:"GET"}};t.renderSuggestions=function(s){var a,i=[];this.clearResponseContainer();if(s&&s.sections&&s.sections.length>0){a=n("<ul/>").appendTo(this.responseContainer);n(s.sections).each((function(){var t=this,s=n("<div/>").attr("id",e.fieldID+"_s_"+t.id).addClass("yag").text(t.label);t.sub&&s.append(n("<span/>").addClass("yagt").text("("+t.sub+")"));a.append(n("<li/>").append(s).mouseover((function(){n(this).addClass("active")})).mouseout((function(){n(this).removeClass("active")})));if(t.msg){var d=n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_n").addClass("yad").text(t.msg);a.append(n("<li/>").append(d).mouseover((function(){n(this).addClass("active")})).mouseout((function(){n(this).removeClass("active")})))}t.issues&&t.issues.length>0&&n(t.issues).each((function(){var s;s=/^http/.test(this.img)?this.img:r+this.img;var d=n("<li/>").append(n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_"+this.key).addClass("yad").append(n("<table/>").addClass("yat").attr({cellpadding:"0",cellspacing:"0"}).append(n("<tr/>").append(n("<td/>").append(n("<img/>").attr("src",s))).append(n("<td/>").append(n("<div/>").addClass("yak").html(this.keyHtml))).append(n("<td/>").css("width","100%").html(this.summary)))));a.append(d);i.push([d,this.key])}))}));t.addSuggestionControls(i);return i}};e.minQueryLength=1;e.queryDelay=.25;t.init(e);return t};d.init=function(){n("fieldset.issue-picker-params").each((function(){var s=e(n(this));n("#"+s.fieldId+"-container").add("#"+s.fieldName+"_container").find("a.popup-trigger").click((function(e){var a=r+"/secure/popups/IssuePicker.jspa?";a+="currentIssue="+s.currentIssueKey+"&";a+="singleSelectOnly="+s.singleSelectOnly+"&";a+="showSubTasks="+s.showSubTasks+"&";a+="showSubTasksParent="+s.showSubTaskParent;s.currentProjectId&&""!==s.currentProjectId&&(a+="&selectedProjectId="+s.currentProjectId);t.callback=function(e){var t,a=[];e=JSON.parse(e);if(s.fieldId&&a&&(t=n("#"+s.fieldId))){n.each(e,(function(){a.push(this.value)}));t.val(a.join(", "))}};var i=window.open(a,"IssueSelectorPopup","status=no,resizable=yes,top=100,left=200,width=620,height=500,scrollbars=yes,resizable");i.opener=self;i.focus();e.preventDefault()}));s.fieldId||(s.fieldId=s.fieldName);!0===s.issuePickerEnabled&&d({fieldID:s.fieldId,delimChar:!0===s.singleSelectOnly?void 0:",",ajaxData:s})}))};return d}));AJS.namespace("jira.widget.autocomplete.Issues",null,require("jira/autocomplete/issue-autocomplete"));AJS.namespace("JIRA.IssueAutoComplete",null,require("jira/autocomplete/issue-autocomplete"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/UserAutoComplete.js' */
define("jira/autocomplete/user-autocomplete",["jira/autocomplete/rest-autocomplete","jira/data/parse-options-from-fieldset","jira/field/create-user-picker-popup-trigger","jira/util/browser","jira/util/elements","jira/util/objects","wrm/context-path","jquery"],(function(e,t,i,r,a,o,n,l){"use strict";var s=n(),u=s+"/rest/api/1.0/users/picker",d=function(t){var i=o.begetObject(e);i.getAjaxParams=function(){return{url:u,data:{fieldName:t.fieldID,fieldConfigId:t.fieldConfigID,projectId:t.projectId},dataType:"json",type:"GET"}};i.renderSuggestions=function(e){if(function(e){var t=!1,i=e.closest("form");i.length&&i.hasClass("submitting")&&(t=!0);return t}(this.field)||!r.isSelenium()&&!a.elementIsFocused(this.field))return!1;var t=void 0,o=[];this.clearResponseContainer();if(e&&e.users&&e.users.length>0){t=l("<ul/>").appendTo(this.responseContainer);l(e.users).each((function(){o.push([l("<li/>").html(this.html).appendTo(t),this.name])}))}e.footer&&this.responseContainer.append(l("<div/>").addClass("yui-ac-ft").html(e.footer).css("display","block"));if(o.length>0){i.addSuggestionControls(o);l(".atlassian-autocomplete div.yad, .atlassian-autocomplete .labels li").textOverflow({autoUpdate:!0})}return o};t.minQueryLength=2;t.queryDelay=.25;i.init(t);return i};d.init=function(e){l("fieldset.user-picker-params",e).each((function(){var r=t(l(this)),a=r.fieldId||r.fieldName,o=l(e).find("#"+a);!function(e,t){e.on("click",i.createUserPickerPopupTrigger({urlBase:s,formName:t.formName||e.closest("form").attr("name"),fieldName:t.fieldName,multiSelect:t.multiSelect,fieldConfigId:t.fieldConfigId,projectIds:t.projectId,actionToOpen:t.actionToOpen}))}(l("#"+a+"_container").find(".popup-trigger"),r);r.userPickerEnabled&&c(o,r)}))};function c(e,t){d({field:parent?e:null,fieldID:t.fieldName,fieldConfigID:t.fieldConfigId,projectId:t.projectId,delimChar:!1===t.multiSelect?void 0:",",ajaxData:{fieldName:t.fieldName}})}return d}));AJS.namespace("jira.widget.autocomplete.Users",null,require("jira/autocomplete/user-autocomplete"));AJS.namespace("JIRA.UserAutoComplete",null,require("jira/autocomplete/user-autocomplete"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/initAutoCompleteFields.js' */
!function(){"use strict";var e=require("jquery"),r=require("jira/data/parse-options-from-fieldset"),i=require("jira/util/events"),t=require("jira/util/events/reasons"),s=require("jira/util/events/types"),a=require("jira/autocomplete/issue-autocomplete"),l=require("jira/autocomplete/user-autocomplete"),o=require("wrm/context-path")();i.bind(s.NEW_CONTENT_ADDED,(function(e,r,i){if(i!==t.panelRefreshed){l.init(r);a.init(r)}}));i.bind(s.NEW_CONTENT_ADDED,(function(i,s,a){a!==t.panelRefreshed&&e("fieldset.user-searcher-params",s).each((function(){var i=r(e(this)),t=e("#"+i.fieldId+"_container",s);if(!0===i.userPickerEnabled)var a=l({fieldID:i.fieldId,delimChar:!0===i.multiSelect?",":void 0,ajaxData:{fieldName:i.fieldName}});var u=function(r){var t=e("#"+i.fieldId,s),l=e("#"+i.fieldId+"Image",s),o=e("#"+i.fieldId+"GroupImage",s),u=e("#"+i.fieldId+"_desc",s);if("select.list.none"===r){t.val("").attr("disabled","true");l.hide();o.hide();u.hide()}else{t.removeAttr("disabled");if("select.list.group"===r){l.hide();o.show();if(!0===i.userPickerEnabled){a.disable();u.hide()}}else{l.show();o.hide();if(!0===i.userPickerEnabled){a.enable();u.show()}}}};e("#"+i.userSelect,s).change((function(){var r=e(this).find("option:selected").attr("rel");u(r)})).find("option:selected").each((function(){u(e(this).attr("rel"))}));t.find("a.user-popup-trigger").click((function(e){var r=o+"/secure/popups/UserPickerBrowser.jspa?";r+="formName="+i.formName+"&";r+="multiSelect="+i.multiSelect+"&";r+="decorator=popup&";r+="element="+i.fieldId;var t=window.open(r,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");t.opener=self;t.focus();e.preventDefault()}));t.find("a.group-popup-trigger").click((function(e){var r=o+"/secure/popups/GroupPickerBrowser.jspa?";r+="formName="+i.formName+"&";r+="multiSelect="+i.multiSelect+"&";r+="decorator=popup&";r+="element="+i.fieldId;var t=window.open(r,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");t.opener=self;t.focus();e.preventDefault()}))}))}))}();
}catch(e){WRMCB(e)};