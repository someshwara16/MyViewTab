WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'jira.webresources:calendar-lib', location = '/includes/lib/calendar/Calendar.js' */
Calendar=function(e,a,t,n,r){this.activeDiv=null;this.currentDateEl=null;this.getDateStatus=null;this.getDateToolTip=null;this.getDateText=null;this.timeout=null;this.onSelected=n||null;this.onClose=r||null;this.dragging=!1;this.hidden=!1;this.minYear=1970;this.maxYear=2050;this.dateFormat=Calendar._TT.DEF_DATE_FORMAT;this.ttDateFormat=Calendar._TT.TT_DATE_FORMAT;this.isPopup=!0;this.weekNumbers=!0;this.firstDayOfWeek="number"==typeof e?e:Calendar._FD;this.showsOtherMonths=!1;this.dateStr=a;this.todayDateStr=t;this.ar_days=null;this.showsTime=!1;this.time24=!0;this.yearStep=2;this.hiliteToday=!0;this.multiple=null;this.table=null;this.element=null;this.tbody=null;this.firstdayname=null;this.monthsCombo=null;this.yearsCombo=null;this.activeMonth=null;this.activeYear=null;this.dateClicked=!1;if(void 0===Calendar._SDN){void 0===Calendar._SDN_len&&(Calendar._SDN_len=3);for(var l=new Array,i=8;i>0;)l[--i]=Calendar._DN[i].substr(0,Calendar._SDN_len);Calendar._SDN=l;void 0===Calendar._SMN_len&&(Calendar._SMN_len=3);l=new Array;for(i=12;i>0;)l[--i]=Calendar._MN[i].substr(0,Calendar._SMN_len);Calendar._SMN=l}};Calendar._C=null;Calendar._TargetTypes={Title:"title",PrevYear:"prev_year",PrevMonth:"prev_month",GoToday:"go_today",NextMonth:"next_month",NextYear:"next_year",WeekDayName:"week_day",Day:"day",Hours:"hours",Minutes:"minutes",AmPm:"am_pm",Confirm:"confirm",Cancel:"cancel"};Calendar._createFocusHandler=function(e){return function(a){if("Tab"===a.key){var t=document.activeElement,n=e.querySelectorAll("button:not([tabindex='-1']), [tabindex='0']"),r=n[0],l=n[n.length-1],i=t===r,s="H2"===t.tagName,d=t===l;if(a.shiftKey&&(i||s)){l.focus();a.preventDefault()}else if(!a.shiftKey&&d){r.focus();a.preventDefault()}a.stopPropagation()}}};Calendar._resetTabindex=function(e,a){e.table.querySelectorAll(".day[tabindex='0']").forEach((function(e){e.setAttribute("tabindex",-1)}));a.setAttribute("tabindex",0)};Calendar._isTimeTarget=function(e){var a=Calendar._TargetTypes;return[a.Hours,a.Minutes,a.AmPm].includes(e.navtype)};Calendar.getAbsolutePos=function(e){var a=jQuery(e).offset();a.x=a.left;a.y=a.top;return a};Calendar.isRelated=function(e,a){var t=a.relatedTarget;if(!t){var n=a.type;"mouseover"==n?t=a.fromElement:"mouseout"==n&&(t=a.toElement)}for(;t;){if(t==e)return!0;t=t.parentNode}return!1};Calendar.removeClass=function(e,a){jQuery(e).removeClass(a)};Calendar.addClass=function(e,a){jQuery(e).addClass(a)};Calendar.getTargetElement=function(e){for(var a=e.target;1!==a.nodeType;)a=a.parentNode;return a};Calendar.stopEvent=function(e){e||(e=window.event);if(e.stopPropagation){e.preventDefault();e.stopPropagation()}else{e.cancelBubble=!0;e.returnValue=!1}return!1};Calendar.addEvent=function(e,a,t){Calendar.removeEvent(e,a,t);e.addEventListener(a,t,!0)};Calendar.removeEvent=function(e,a,t){e.removeEventListener(a,t,!0)};Calendar.createElement=function(e,a){var t=document.createElement(e);void 0!==a&&a.appendChild(t);return t};Calendar._assignMouseEvents=function(e,a,t){e.calendar=a;Calendar.addEvent(e,"mouseover",Calendar._setInfoText);Calendar.addEvent(e,"mouseout",Calendar._resetInfoText);Calendar.addEvent(e,"mousedown",Calendar._handleDragging);t||Calendar.addEvent(e,"click",Calendar._handleClick)};Calendar.findMonth=function(e){return void 0!==e.month?e:void 0!==e.parentNode.month?e.parentNode:null};Calendar.findYear=function(e){return void 0!==e.year?e:void 0!==e.parentNode.year?e.parentNode:null};Calendar.showMonthsCombo=function(){if(!(e=Calendar._C))return!1;var e,a=(e=e).activeDiv,t=e.monthsCombo;e.activeMonth&&Calendar.removeClass(e.activeMonth,"active");var n=e.monthsCombo.getElementsByTagName("div")[e.date.getMonth()];Calendar.addClass(n,"active");e.activeMonth=n;var r=t.style;r.display="block";if(a.navtype===Calendar._TargetTypes.PrevMonth)r.left=a.offsetLeft+"px";else{var l=t.offsetWidth;void 0===l&&(l=50);r.left=a.offsetLeft+a.offsetWidth-l+"px"}r.top=a.offsetTop+a.offsetHeight+"px"};Calendar.showYearsCombo=function(e){if(!(a=Calendar._C))return!1;var a,t=(a=a).activeDiv,n=a.yearsCombo;a.activeYear&&Calendar.removeClass(a.activeYear,"active");a.activeYear=null;for(var r=a.date.getFullYear()+(e?1:-1),l=n.firstChild,i=!1,s=12;s>0;--s){if(r>=a.minYear&&r<=a.maxYear){l.innerHTML=r;l.year=r;l.style.display="block";i=!0}else l.style.display="none";l=l.nextSibling;r+=e?a.yearStep:-a.yearStep}if(i){var d=n.style;d.display="block";if(t.navtype===Calendar._TargetTypes.PrevYear)d.left=t.offsetLeft+"px";else{var o=n.offsetWidth;void 0===o&&(o=50);d.left=t.offsetLeft+t.offsetWidth-o+"px"}d.top=t.offsetTop+t.offsetHeight+"px"}};Calendar.tableMouseUp=function(ev){var cal=Calendar._C;if(!cal)return!1;cal.timeout&&clearTimeout(cal.timeout);var el=cal.activeDiv;if(!el)return!1;var target=Calendar.getTargetElement(ev);ev||(ev=window.event);var mon=Calendar.findMonth(target),date=null;if(mon){date=new Date(cal.date);if(mon.month!=date.getMonth()){date.setMonth(mon.month);cal.setDate(date);cal.dateClicked=!1}}else{var year=Calendar.findYear(target);if(year){date=new Date(cal.date);if(year.year!=date.getFullYear()){date.setFullYear(year.year);cal.setDate(date);cal.dateClicked=!1}}}with(Calendar){removeEvent(document,"mouseup",tableMouseUp);removeEvent(document,"mouseover",tableMouseOver);removeEvent(document,"mousemove",tableMouseOver);cal._hideCombos();_C=null;return stopEvent(ev)}};Calendar.tableMouseOver=function(e){var a=Calendar._C;if(a){var t=a.activeDiv,n=Calendar.getTargetElement(e);e||(e=window.event);if(Calendar._isTimeTarget(t)&&n!=t){var r,l=Calendar.getAbsolutePos(t),i=t.offsetWidth,s=e.clientX,d=!0;if(s>l.x+i){r=s-l.x-i;d=!1}else r=l.x-s;r<0&&(r=0);for(var o=t._range,u=t._current,h=Math.floor(r/10)%o.length,C=o.length;--C>=0&&o[C]!=u;);for(;h-- >0;)d?--C<0&&(C=o.length-1):++C>=o.length&&(C=0);var c=o[C];t.innerHTML=c;a.onUpdateTime()}return Calendar.stopEvent(e)}};Calendar.drag=function(e){var a=Calendar._C;if(!a||!a.dragging)return!1;var t=e.pageX,n=e.pageY,r=a.element.style;r.left=t-a.xOffs+"px";r.top=n-a.yOffs+"px";return Calendar.stopEvent(e)};Calendar.endDragging=function(e){var a=Calendar._C;if(!a)return!1;a.dragging=!1;Calendar.removeEvent(document,"mousemove",Calendar.drag);Calendar.removeEvent(document,"mouseup",Calendar.endDragging);Calendar.tableMouseUp(e)};Calendar._handleDragging=function(ev){var el=ev.target;if(el.disabled)return!1;var cal=el.calendar;cal.activeDiv=el;Calendar._C=cal;if(el.navtype!==Calendar._TargetTypes.Title)with(Calendar){if(Calendar._isTimeTarget(el)){el._current=el.innerHTML;addEvent(document,"mousemove",tableMouseOver)}else addEvent(document,"mouseover",tableMouseOver);addEvent(document,"mouseup",tableMouseUp)}else cal.isPopup&&cal._startDragging(ev);if(el.navtype===Calendar._TargetTypes.PrevMonth||el.navtype===Calendar._TargetTypes.NextMonth){cal.timeout&&clearTimeout(cal.timeout);cal.timeout=setTimeout("Calendar.showMonthsCombo()",250)}else if(el.navtype===Calendar._TargetTypes.PrevYear||el.navtype===Calendar._TargetTypes.NextYear){cal.timeout&&clearTimeout(cal.timeout);cal.timeout=setTimeout(el.navtype===Calendar._TargetTypes.NextYear?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250)}else cal.timeout=null;return Calendar.stopEvent(ev)};Calendar._setInfoText=function(e){var a=e.target;if(!(Calendar.isRelated(a,e)||Calendar._C||a.disabled)){if(a.ttip){"_"==a.ttip.substr(0,1)&&(a.ttip=a.caldate.print(a.calendar.ttDateFormat)+a.ttip.substr(1));a.calendar.infoTextContainer.innerHTML=a.ttip}return Calendar.stopEvent(e)}};Calendar._resetInfoText=function(ev){with(Calendar){var el=ev.target;if(isRelated(el,ev)||_C||el.disabled)return;el.calendar&&(el.calendar.infoTextContainer.innerHTML=_TT[el.calendar.showsTime?"SEL_DATE_TIME":"SEL_DATE"]);return stopEvent(ev)}};Calendar._handleDateClick=function(e){if(!e.className.includes("emptycell")){var a=e.calendar;if(a.currentDateEl){Calendar.removeClass(a.currentDateEl,"selected");Calendar.addClass(e,"selected");a.currentDateEl=e;Calendar._resetTabindex(a,e);e.focus()}a.date.setDateOnly(e.caldate);var t=a.date,n=!(a.dateClicked=!e.otherMonth);n||a.currentDateEl||a._toggleMultipleDate(new Date(t));n&&a._init(a.firstDayOfWeek,t)}};Calendar._handleWeekDayNameClick=function(e){e.calendar.setFirstDayOfWeek(e.fdow)};Calendar._handleTimeClick=function(e,a){for(var t=e._range,n=e.innerHTML,r=t.length;--r>=0&&t[r]!=n;);a&&a.shiftKey?--r<0&&(r=t.length-1):++r>=t.length&&(r=0);var l=t[r];e.innerHTML=l;e.ariaLabelGenerator&&(e.ariaLabel=e.ariaLabelGenerator(l));e.calendar.onUpdateTime()};Calendar._handleClick=function(e){var a=e.target,t=a.calendar,n=null;if(a.navtype){n=new Date(t.date);a.navtype===Calendar._TargetTypes.GoToday&&(t.todayDateStr?n=new Date(t.todayDateStr):n.setDateOnly(new Date));if(a.navtype===Calendar._TargetTypes.Confirm){t.callHandler();return}if(a.navtype===Calendar._TargetTypes.Cancel){t.callCloseHandler();return}if(Calendar._isTimeTarget(a)){Calendar._handleTimeClick(a,e);return}if(a.navtype===Calendar._TargetTypes.WeekDayName){Calendar._handleWeekDayNameClick(a);return}t.dateClicked=!1;var r=n.getFullYear(),l=n.getMonth();function i(e){var a=n.getDate(),t=n.getMonthDays(e);a>t&&n.setDate(t);n.setMonth(e)}switch(a.navtype){case Calendar._TargetTypes.PrevYear:r>t.minYear&&n.setFullYear(r-1);break;case Calendar._TargetTypes.PrevMonth:if(l>0)i(l-1);else if(r-- >t.minYear){n.setFullYear(r);i(11)}break;case Calendar._TargetTypes.NextMonth:if(l<11)i(l+1);else if(r<t.maxYear){n.setFullYear(r+1);i(0)}break;case Calendar._TargetTypes.NextYear:r<t.maxYear&&n.setFullYear(r+1);break;case Calendar._TargetTypes.GoToday:if("function"==typeof t.getDateStatus&&t.getDateStatus(n,n.getFullYear(),n.getMonth(),n.getDate()))return!1}n.equalsTo(t.date)||t.setDate(n)}else Calendar._handleDateClick(a)};Calendar.prototype.create=function(e){var a=this,t=null;if(e){t=e;this.isPopup=!1}else{t=document.getElementsByTagName("body")[0];this.isPopup=!0}this.dateStr&&(this.date=new Date(this.dateStr));this.date&&!isNaN(this.date)||(this.date=new Date);var n=Calendar.createElement("div");this.element=n;Calendar.addClass(n,"calendar");if(this.isPopup){n.style.position="absolute";n.style.display="none";n.role="dialog";n.ariaLabel=Calendar._TT[this.showsTime?"SEL_DATE_TIME":"SEL_DATE"];n.setAttribute("aria-modal",!0)}var r=Calendar.createElement("div");Calendar.addClass(r,"calendar-header");var l=Calendar.createElement("h2");l.id="calendar-title";l.setAttribute("aria-live","polite");Calendar.addClass(l,"row title");l.setAttribute("tabindex",-1);if(this.isPopup){l.navtype=Calendar._TargetTypes.Title;l.ttip=Calendar._TT.DRAG_TO_MOVE;l.style.cursor="move";Calendar._assignMouseEvents(l,this,!0)}this.title=l;r.appendChild(this.title);var i=function(e,t,n){var r=Calendar.createElement("button");r.navtype=t;r.innerHTML=e;r.ttip=n;r.ariaLabel=n;Calendar._assignMouseEvents(r,a);return r},s=Calendar.createElement("div");Calendar.addClass(s,"row nav-row");this._nav_py=i("&#x00ab;",Calendar._TargetTypes.PrevYear,Calendar._TT.PREV_YEAR);Calendar.addClass(this._nav_py,"prev-year combobox-trigger");s.appendChild(this._nav_py);this._nav_pm=i("&#x2039;",Calendar._TargetTypes.PrevMonth,Calendar._TT.PREV_MONTH);Calendar.addClass(this._nav_pm,"prev-month combobox-trigger");s.appendChild(this._nav_pm);this._nav_now=i(Calendar._TT.TODAY,Calendar._TargetTypes.GoToday,Calendar._TT.GO_TODAY);Calendar.addClass(this._nav_now,"go-today");s.appendChild(this._nav_now);this._nav_nm=i("&#x203a;",Calendar._TargetTypes.NextMonth,Calendar._TT.NEXT_MONTH);Calendar.addClass(this._nav_nm,"next-month combobox-trigger");s.appendChild(this._nav_nm);this._nav_ny=i("&#x00bb;",Calendar._TargetTypes.NextYear,Calendar._TT.NEXT_YEAR);Calendar.addClass(this._nav_ny,"next-year combobox-trigger");s.appendChild(this._nav_ny);r.appendChild(s);this.element.appendChild(r);var d=Calendar.createElement("table");this.table=d;d.role="grid";d.setAttribute("aria-labelledby","calendar-title");d.cellSpacing=0;d.cellPadding=0;d.calendar=this;this.element.appendChild(d);var o=Calendar.createElement("thead",d);o.role="rowgroup";var u=null,h=null;(h=Calendar.createElement("tr",o)).role="row";Calendar.addClass(h,"daynames");if(this.weekNumbers){u=Calendar.createElement("th",h);Calendar.addClass(u,"name wn");u.innerHTML=Calendar._TT.WK;u.role="columnheader";u.ariaLabel=Calendar._TT.WEEK}for(var C=7;C>0;--C){(u=Calendar.createElement("th",h)).role="columnheader";u.setAttribute("scope","col");if(!C){u.navtype=Calendar._TargetTypes.Day;Calendar._assignMouseEvents(u,this)}}this.firstdayname=this.weekNumbers?h.firstChild.nextSibling:h.firstChild;this._displayWeekdays();var c=Calendar.createElement("tbody",d);c.role="rowgroup";this.tbody=c;for(C=6;C>0;--C){(h=Calendar.createElement("tr",c)).role="row";if(this.weekNumbers){(u=Calendar.createElement("th",h)).role="rowheader";u.setAttribute("scope","row")}for(var p=7;p>0;--p){u=Calendar.createElement("td",h);Calendar._assignMouseEvents(u,this)}}this.showsTime?this._createTimeRow(this.element):this.onSetTime=this.onUpdateTime=function(){};div=Calendar.createElement("div",this.element);div.setAttribute("aria-hidden",!0);Calendar.addClass(div,"ttip");div.innerHTML=Calendar._TT[this.showsTime?"SEL_DATE_TIME":"SEL_DATE"];if(this.isPopup){div.navtype=Calendar._TargetTypes.Title;div.ttip=Calendar._TT.DRAG_TO_MOVE;div.style.cursor="move";Calendar._assignMouseEvents(div,this,!0)}this.infoTextContainer=div;div=Calendar.createElement("div",this.element);this.monthsCombo=div;Calendar.addClass(div,"combo");for(C=0;C<Calendar._MN.length;++C){var m=Calendar.createElement("div");Calendar.addClass(m,"label");m.month=C;m.innerHTML=Calendar._SMN[C];div.appendChild(m)}div=Calendar.createElement("div",this.element);this.yearsCombo=div;Calendar.addClass(div,"combo");for(C=12;C>0;--C){var v=Calendar.createElement("div");Calendar.addClass(v,"label");div.appendChild(v)}div=Calendar.createElement("div",this.element);Calendar.addClass(div,"actions-row");var f=i(Calendar._TT.CONFIRM,Calendar._TargetTypes.Confirm,Calendar._TT.CONFIRM);Calendar.addClass(f,"confirm");div.appendChild(f);f=i(Calendar._TT.CANCEL,Calendar._TargetTypes.Cancel,Calendar._TT.CANCEL);Calendar.addClass(f,"cancel");div.appendChild(f);this._init(this.firstDayOfWeek,this.date);t.appendChild(this.element);Calendar.addEvent(this.element,"mousedown",(function(e){e.preventDefault()}))};Calendar.prototype._createTimeRow=function(e){var a=this,t=Calendar.createElement("div",e);Calendar.addClass(t,"time-row");var n=Calendar.createElement("div",t);n.innerHTML=Calendar._TT.TIME||"&nbsp;";var r=Calendar.createElement("div",t);Calendar.addClass(r,"time");function l(e,t,n,r,l,i,s){var d=Calendar.createElement("button",e);Calendar.addClass(d,r);d.innerHTML=l;n&&(d.ariaLabel=n);d.setAttribute("aria-live","assertive");d.setAttribute("aria-describedby",t);d.calendar=a;d.ttip=Calendar._TT.TIME_PART;d._range=[];if("number"!=typeof i)d._range=i;else for(var o=i;o<=s;++o){var u;u=o<10&&s>=10?"0"+o:""+o;d._range[d._range.length]=u}Calendar._assignMouseEvents(d,a);return d}var i=a.date.getHours(),s=a.date.getMinutes(),d=!a.time24,o=i>12;d&&o&&(i-=12);var u=l(r,"calendar-time-instructions",Calendar._TT.HOURS_FN(i),"hour",i,d?1:0,d?12:23);u.navtype=Calendar._TargetTypes.Hours;u.ariaLabelGenerator=Calendar._TT.HOURS_FN;var h=Calendar.createElement("p",r);h.id="calendar-time-instructions";h.innerHTML=Calendar._TT.TIME_INSTRUCTIONS;h.setAttribute("aria-hidden",!0);Calendar.addClass(h,"assistive");var C=Calendar.createElement("span",r);C.innerHTML=":";Calendar.addClass(C,"colon");var c=l(r,"calendar-time-instructions",Calendar._TT.MINUTES_FN(s),"minute",s,0,59);c.navtype=Calendar._TargetTypes.Minutes;c.ariaLabelGenerator=Calendar._TT.MINUTES_FN;var p=null;n=Calendar.createElement("div",t);if(d){(p=l(n,"calendar-am-pm-instructions",null,"ampm",o?Calendar._TT.PM:Calendar._TT.AM,[Calendar._TT.am,Calendar._TT.pm])).navtype=Calendar._TargetTypes.AmPm;(h=Calendar.createElement("p",n)).id="calendar-am-pm-instructions";h.innerHTML=Calendar._TT.TIME_AM_PM_INSTRUCTIONS;h.setAttribute("aria-hidden",!0);Calendar.addClass(h,"assistive")}else n.innerHTML="&nbsp;";this.onSetTime=function(){var e,a=this.date.getHours(),t=this.date.getMinutes();if(d){(e=a>=12)&&(a-=12);0==a&&(a=12);p.innerHTML=e?Calendar._TT.pm:Calendar._TT.am}u.innerHTML=a<10?"0"+a:a;u.ariaLabel=Calendar._TT.HOURS_FN(u.innerHTML);c.innerHTML=t<10?"0"+t:t;c.ariaLabel=Calendar._TT.MINUTES_FN(c.innerHTML)};this.onUpdateTime=function(){var e=this.date,a=parseInt(u.innerHTML,10);d&&(new RegExp(Calendar._TT.pm,"i").test(p.innerHTML)&&a<12?a+=12:new RegExp(Calendar._TT.am,"i").test(p.innerHTML)&&12==a&&(a=0));var t=e.getDate(),n=e.getMonth(),r=e.getFullYear();e.setHours(a);e.setMinutes(parseInt(c.innerHTML,10));e.setFullYear(r);e.setMonth(n);e.setDate(t);this.dateClicked=!1}};Calendar._upkeyEvent=function(e){"Escape"===e.key&&setTimeout((function(){e.stopPropagation();var a=window._dynarch_popupCalendar;a&&!a.multiple&&a.callCloseHandler()}))};Calendar._keyEvent=function(e){if("Tab"!==e.key){var a=window._dynarch_popupCalendar;if(!a||a.multiple)return!1;var t="keydown"==e.type,n=e.keyCode;switch(n){case 32:case 13:Calendar._handleClick(e);break;case 37:case 38:case 39:case 40:if(!t)return Calendar.stopEvent(e);var r,l,i,s,d;r=37==n||38==n;d=37==n||39==n?1:7;function o(){var e=a.currentDateEl.pos;l=15&e;i=e>>4;s=a.ar_days[i][l]}o();function u(){var e=new Date(a.date);e.setDate(e.getDate()-d);a.setDate(e);Calendar._resetTabindex(a,a.currentDateEl);a.currentDateEl.focus()}function h(){var e=new Date(a.date);e.setDate(e.getDate()+d);a.setDate(e);Calendar._resetTabindex(a,a.currentDateEl);a.currentDateEl.focus()}for(;;){switch(n){case 37:if(!(--l>=0)){l=6;n=38;continue}s=a.ar_days[i][l];break;case 38:if(--i>=0)s=a.ar_days[i][l];else{u();o()}break;case 39:if(!(++l<7)){l=0;n=40;continue}s=a.ar_days[i][l];break;case 40:if(++i<a.ar_days.length)s=a.ar_days[i][l];else{h();o()}}break}s&&(s.disabled?r?u():h():Calendar._handleClick({target:s}))}return Calendar.stopEvent(e)}};Calendar.prototype._init=function(e,a){var t=new Date(a);t.setHours(13);var n=new Date,r=n.getFullYear(),l=n.getMonth(),i=n.getDate();this.table.style.visibility="hidden";var s=t.getFullYear();if(s<this.minYear){s=this.minYear;t.setFullYear(s)}else if(s>this.maxYear){s=this.maxYear;t.setFullYear(s)}this.firstDayOfWeek=e;var d=t.getMonth(),o=t.getDate();t.setDate(1);var u=(t.getDay()-this.firstDayOfWeek)%7;u<0&&(u+=7);t.setDate(-u);t.setDate(t.getDate()+1);for(var h=!1,C=this.tbody.firstChild,c=this.ar_days=new Array,p=Calendar._TT.WEEKEND,m=this.multiple?this.datesCells={}:null,v=0;v<6;++v,C=C.nextSibling){var f=C.firstChild;if(this.weekNumbers){f.className="day wn";var y=t;0==d&&0==v&&0==Date.useISO8601WeekNumbers&&(y=new Date(s,d,1));f.innerHTML=y.getWeekNumber(this.firstDayOfWeek);f.ariaLabel=Calendar._TT.WEEK_FN(f.innerHTML);f=f.nextSibling}C.className="daysrow";for(var _,T=!1,g=c[v]=[],b=0;b<7;++b,f=f.nextSibling,t.setDate(_+1)){_=t.getDate();var D=t.getDay();f.className="day day-"+_;f.pos=v<<4|b;g[b]=f;var M=t.getMonth()==d;if(M){f.otherMonth=!1;T=!0;f.role="gridcell";f.setAttribute("aria-selected",!1)}else{if(!this.showsOtherMonths){f.className="emptycell";f.disabled=!0;f.removeAttribute("tabindex");f.removeAttribute("role");f.removeAttribute("aria-selected");f.innerHTML="";continue}Calendar.addClass(f,"othermonth");f.otherMonth=!0;f.role="gridcell";f.setAttribute("aria-selected",!1)}f.disabled=!1;f.innerHTML=this.getDateText?this.getDateText(t,_):_;f.setAttribute("tabindex",-1);if(!h&&!this.hiliteToday){f.setAttribute("tabindex",0);h=!0}m&&(m[t.print("%Y%m%d")]=f);if(this.getDateStatus){var E=this.getDateStatus(t,s,d,_);if(this.getDateToolTip){var w=this.getDateToolTip(t,s,d,_);w&&(f.title=w)}if(!0===E){Calendar.addClass(f,"disabled");f.disabled=!0}else{/disabled/i.test(E)&&(f.disabled=!0);Calendar.addClass(f,E)}}if(!f.disabled){f.caldate=new Date(t);f.ttip="_";if(!this.multiple&&M&&_==o&&this.hiliteToday){Calendar.addClass(f,"selected");f.setAttribute("aria-selected",!0);f.setAttribute("tabindex",0);h=!0;this.currentDateEl=f}if(t.getFullYear()==r&&t.getMonth()==l&&_==i){Calendar.addClass(f,"today");f.ttip+=Calendar._TT.PART_TODAY}-1!=p.indexOf(D.toString())&&Calendar.addClass(f,f.otherMonth?" oweekend":" weekend")}}T||this.showsOtherMonths||(C.className="emptyrow")}this.date=new Date(a);this.onSetTime();this.title.innerHTML=Calendar._MN[d]+", "+s;this.table.style.visibility="visible";this._initMultipleDates()};Calendar.prototype._initMultipleDates=function(){if(this.multiple)for(var e in this.multiple){var a=this.datesCells[e];if(this.multiple[e]&&a){Calendar.addClass(a,"selected");a.setAttribute("aria-selected",!0);a.setAttribute("tabindex",0)}}};Calendar.prototype._toggleMultipleDate=function(e){if(this.multiple){var a=e.print("%Y%m%d"),t=this.datesCells[a];if(t){if(this.multiple[a]){Calendar.removeClass(t,"selected");t.setAttribute("aria-selected",!1);t.setAttribute("tabindex",-1);delete this.multiple[a]}else{Calendar.addClass(t,"selected");t.setAttribute("aria-selected",!0);t.setAttribute("tabindex",0);this.multiple[a]=e}}}};Calendar.prototype.setDate=function(e){e.equalsTo(this.date)||this._init(this.firstDayOfWeek,e)};Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date)};Calendar.prototype.setFirstDayOfWeek=function(e){this._init(e,this.date);this._displayWeekdays()};Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(e){this.getDateStatus=e};Calendar.prototype.setRange=function(e,a){this.minYear=e;this.maxYear=a};Calendar.prototype.callHandler=function(){this.onSelected&&this.onSelected(this,this.date.print(this.dateFormat));this.isPopup&&this.hide()};Calendar.prototype.callCloseHandler=function(){this.onClose&&this.onClose(this)};Calendar.prototype.destroy=function(){this.hide();jQuery(this.element).remove();Calendar._C=null;window._dynarch_popupCalendar=null};Calendar.prototype.reparent=function(e){var a=this.element;a.parentNode.removeChild(a);e.appendChild(a)};Calendar._checkCalendar=function(e){var a=window._dynarch_popupCalendar;if(!a)return!1;for(var t=Calendar.getTargetElement(e);null!=t&&t!=a.element;t=t.parentNode);if(null==t){window._dynarch_popupCalendar.callCloseHandler();return Calendar.stopEvent(e)}};Calendar.prototype.show=function(){if(!this.params.inputField.disabled){Calendar.current=this;this.element.style.display="block";Calendar.addClass(this.element,"active");this.hidden=!1;if(this.isPopup){window._dynarch_popupCalendar=this;Calendar.addEvent(document,"keyup",Calendar._upkeyEvent);Calendar.addEvent(document,"keydown",Calendar._keyEvent);Calendar.addEvent(document,"mousedown",Calendar._checkCalendar);this.focusHandler=Calendar._createFocusHandler(this.element);Calendar.addEvent(document,"keydown",this.focusHandler);this.currentDateEl?this.currentDateEl.focus():this.title.focus()}}};Calendar.prototype.hide=function(){if(this.isPopup){Calendar.removeEvent(document,"keyup",Calendar._upkeyEvent);Calendar.removeEvent(document,"keydown",Calendar._keyEvent);Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar);Calendar.removeEvent(document,"keydown",this.focusHandler)}Calendar.current=null;this.element.style.display="none";Calendar.removeClass(this.element,"active");this.hidden=!0;this.triggerEl?this.triggerEl.focus():this.params.button?this.params.button.focus():this.params.inputField&&this.params.inputField.focus()};Calendar.prototype.showAt=function(e,a){var t=this.element.style;t.left=e+"px";t.top=a+"px";this.show()};Calendar.prototype.showAtElement=function(e,a){var t=this,n=Calendar.getAbsolutePos(e);if(!a||"string"!=typeof a){this.showAt(n.x,n.y+e.offsetHeight);return!0}this.element.style.display="block";Calendar.continuation_for_the_khtml_browser=function(){var r=jQuery(t.element).outerWidth(),l=jQuery(t.element).outerHeight();t.element.style.display="none";var i=a.substr(0,1),s="l";a.length>1&&(s=a.substr(1,1));switch(i){case"T":n.y-=l;break;case"B":n.y+=jQuery(e).outerHeight();break;case"C":n.y+=(jQuery(e).outerHeight()-l)/2;break;case"t":n.y+=jQuery(e).outerHeight()-l}switch(s){case"L":n.x-=r;break;case"R":n.x+=jQuery(e).outerWidth();break;case"C":n.x+=(jQuery(e).outerWidth()-r)/2;break;case"l":n.x+=jQuery(e).outerWidth()-r}n.width=r;n.height=l+40;t.monthsCombo.style.display="none";!function(e){e.x<0&&(e.x=0);e.y<0&&(e.y=0);var a=document.createElement("div"),t=a.style;t.position="absolute";t.right=t.bottom=t.width=t.height="0px";document.body.appendChild(a);var n=Calendar.getAbsolutePos(a);document.body.removeChild(a);n.y+=jQuery(window).scrollTop();n.x+=jQuery(window).scrollLeft();var r=e.x+e.width-n.x;r>0&&(e.x-=r);(r=e.y+e.height-n.y)>0&&(e.y-=r)}(n);t.showAt(n.x,n.y)};Calendar.continuation_for_the_khtml_browser()};Calendar.prototype.setDateFormat=function(e){this.dateFormat=e};Calendar.prototype.setTtDateFormat=function(e){this.ttDateFormat=e};Calendar.prototype.parseDate=function(e,a){a||(a=this.dateFormat);this.setDate(Date.parseDate(e,a))};Calendar.prototype._displayWeekdays=function(){for(var e=this.firstDayOfWeek,a=this.firstdayname,t=Calendar._TT.WEEKEND,n=0;n<7;++n){a.className="day name";var r=(n+e)%7;if(n){a.ttip=Calendar._TT.DAY_FIRST.replace("%s",Calendar._DN[r]);a.navtype=Calendar._TargetTypes.WeekDayName;a.fdow=r;Calendar._assignMouseEvents(a,this)}-1!=t.indexOf(r.toString())&&Calendar.addClass(a,"weekend");a.innerHTML=Calendar._SDN[(n+e)%7];a.ariaLabel=Calendar._DN[(n+e)%7];a=a.nextSibling}};Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none";this.yearsCombo.style.display="none"};Calendar.prototype._startDragging=function(e){if(!this.dragging){this.dragging=!0;var a=e.clientX+window.scrollX,t=e.clientY+window.scrollY,n=this.element.style;this.xOffs=a-parseInt(n.left);this.yOffs=t-parseInt(n.top);Calendar.addEvent(document,"mousemove",Calendar.drag);Calendar.addEvent(document,"mouseup",Calendar.endDragging)}};Date._MD=new Array(31,28,31,30,31,30,31,31,30,31,30,31);Date.SECOND=1e3;Date.MINUTE=60*Date.SECOND;Date.HOUR=60*Date.MINUTE;Date.DAY=24*Date.HOUR;Date.WEEK=7*Date.DAY;Date._multisplit=function(e,a){if(null==e)return null;null==a&&(a="");var t=[],n=e.length,r="",l=!1;for(i=0;i<n;i++){var s=e.charAt(i);if(-1==a.indexOf(s)){l=!0;r+=s}else if(l){t[t.length]=r;r="";l=!1}}r.length>0&&(t[t.length]=r);0==t.length&&(t[t.length]="");return t};Date._parseNonDateFormatChars=function(e){var a="",t=e.length;for(i=0;i<t;i++){var n=e.charAt(i);if("%"==n){var r="";i+1<t&&(r=e.charAt(i+1));i+=1;if(r.length>0&&-1!="aAbBCdeHIJklmMnpPRSstUWVuwyY%".indexOf(r))continue;-1==a.indexOf(n)&&(a+=n);r.length>0&&-1==a.indexOf(r)&&(a+=r)}else-1==a.indexOf(n)&&(a+=n)}return a};Date.splitDate=function(e,a){var t=0,n=-1,r=0,l=Date._parseNonDateFormatChars(a),i=Date._multisplit(e,l),s=a.match(/%./g),d=0,o=0,u=0,h=0;for(d=0;d<i.length;++d)if(i[d])switch(s[d]){case"%d":case"%e":r=Number(i[d]);break;case"%m":n=Number(i[d])-1;break;case"%Y":case"%y":(t=Number(i[d]))<100&&(t+=t>29?1900:2e3);break;case"%b":case"%B":var C=i[d].toLowerCase(),c=!1;if("%b"==s[d])for(o=0;o<12;++o)if(Calendar._SMN[o].substr(0,C.length).toLowerCase()==C){n=o;c=!0;break}if(!c)for(o=0;o<12;++o)if(Calendar._MN[o].substr(0,C.length).toLowerCase()==C){n=o;break}break;case"%H":case"%I":case"%k":case"%l":u=Number(i[d]);break;case"%P":case"%p":/pm/i.test(i[d])&&u<12?u+=12:/am/i.test(i[d])&&u>=12&&(u-=12);break;case"%M":h=Number(i[d]);break;case"%R":var p=i[d],m=p.indexOf(":"),v=p.substring(0,m),f=-1==m?0:p.substring(m+1);u=Number(v);h=Number(f)}return{parts:i,year:t,month:n,day:r,hour:u,minute:h}};Date.parseDate=function(e,a){var t=new Date,n=Date.splitDate(e,a),r=n.parts,l=n.year,i=n.month,s=n.day,d=n.hour,o=n.minute,u=0,h=0;isNaN(l)&&(l=t.getFullYear());isNaN(i)&&(i=t.getMonth());isNaN(s)&&(s=t.getDate());isNaN(d)&&(d=t.getHours());isNaN(o)&&(o=t.getMinutes());if(0!=l&&-1!=i&&0!=s)return new Date(l,i,s,d,o,0);l=0;i=-1;s=0;for(u=0;u<r.length;++u)if(-1!=r[u].search(/[a-zA-Z]+/)){var C=-1;for(h=0;h<12;++h)if(Calendar._MN[h].substr(0,r[u].length).toLowerCase()==r[u].toLowerCase()){C=h;break}if(-1!=C){-1!=i&&(s=i+1);i=C}}else Number(r[u])<=12&&-1==i?i=r[u]-1:Number(r[u])>31&&0==l?(l=Number(r[u]))<100&&(l+=l>29?1900:2e3):0==s&&(s=r[u]);0==l&&(l=t.getFullYear());return-1!=i&&0!=s?new Date(l,i,s,d,o,0):t};Date.prototype.getMonthDays=function(e){var a=this.getFullYear();void 0===e&&(e=this.getMonth());return 0!=a%4||0==a%100&&0!=a%400||1!=e?Date._MD[e]:29};Date.prototype.getDayOfYear=function(){var e=new Date(this.getFullYear(),this.getMonth(),this.getDate(),13,0,0)-new Date(this.getFullYear(),0,0,13,0,0);return Math.floor(e/Date.DAY)};Date.prototype.getWeekNumber=function(e){return Date.useISO8601WeekNumbers?this.getISO8601WeekNumber():this.getSimpleWeekNumber(e)};Date.prototype.getISO8601WeekNumber=function(){function e(e,a,t){y=e;m=a;a<3&&(y-=1);a<3&&(m+=12);return Math.floor(365.25*y)-Math.floor(y/100)+Math.floor(y/400)+Math.floor(30.6*(m+1))+t-62}return function(a){year=a.getFullYear();month=a.getMonth();day=a.getDate();wday=a.getDay();weekday=(wday+6)%7+1;isoyear=year;d0=e(year,1,0);weekday0=(d0+4)%7+1;d=e(year,month+1,day);isoweeknr=Math.floor((d-d0+weekday0+6)/7)-Math.floor((weekday0+3)/7);if(11==month&&day-weekday>27){isoweeknr=1;isoyear+=1}if(0==month&&weekday-day>3){d0=e(year-1,1,0);weekday0=(d0+4)%7+1;isoweeknr=Math.floor((d-d0+weekday0+6)/7)-Math.floor((weekday0+3)/7);isoyear-=1}return isoweeknr}(this)};Date.prototype.getSimpleWeekNumber=function(e){return function(e,a,t){var n,r=e.getFullYear(),l=new Date(r,0,1);n=Math.round((e-l)/864e5);null!=a&&(n-=(7+a-l.getDay())%7);null!=t&&(n+=t);return[r,1+n/7|0,1+(7+n)%7]}(this,e||6,6)[1]};Date.prototype.equalsTo=function(e){return this.getFullYear()==e.getFullYear()&&this.getMonth()==e.getMonth()&&this.getDate()==e.getDate()&&this.getHours()==e.getHours()&&this.getMinutes()==e.getMinutes()};Date.prototype.setDateOnly=function(e){var a=new Date(e);this.setDate(1);this.setFullYear(a.getFullYear());this.setMonth(a.getMonth());this.setDate(a.getDate())};Date.prototype.print=function(e){var a=this.getMonth(),t=this.getDate(),n=this.getFullYear(),r=this.getWeekNumber(),l=this.getDay(),i={},s=this.getHours(),d=s>=12,o=d?s-12:s,u=this.getDayOfYear();0==o&&(o=12);var h=this.getMinutes(),C=this.getSeconds();i["%a"]=Calendar._SDN[l];i["%A"]=Calendar._DN[l];i["%b"]=Calendar._SMN[a];i["%B"]=Calendar._MN[a];i["%C"]=1+Math.floor(n/100);i["%d"]=t<10?"0"+t:t;i["%e"]=t;i["%H"]=s<10?"0"+s:s;i["%I"]=o<10?"0"+o:o;i["%j"]=u<100?u<10?"00"+u:"0"+u:u;i["%k"]=s;i["%l"]=o;i["%m"]=a<9?"0"+(1+a):1+a;i["%M"]=h<10?"0"+h:h;i["%n"]="\n";i["%p"]=d?Calendar._TT.PM:Calendar._TT.AM;i["%P"]=d?Calendar._TT.PM:Calendar._TT.AM;i["%R"]=i["%k"]+":"+i["%M"];i["%s"]=Math.floor(this.getTime()/1e3);i["%S"]=C<10?"0"+C:C;i["%t"]="\t";i["%U"]=i["%W"]=i["%V"]=r<10?"0"+r:r;i["%u"]=l+1;i["%w"]=l;i["%y"]=(""+n).slice(-2);i["%Y"]=n;i["%%"]="%";return e.replace(/%./g,(function(e){return i[e]||e}))};Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear;Date.prototype.setFullYear=function(){var e=new Date(this);e.__msh_oldSetFullYear.apply(this,arguments);e.getMonth()!=this.getMonth()&&this.setDate(28);this.__msh_oldSetFullYear.apply(this,arguments)};window._dynarch_popupCalendar=null;
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:calendar-lib', location = '/includes/lib/calendar/Calendar.setup.js' */
!function(e,t,a){Calendar.setup=function(n){n=n||{};function r(e,t){void 0===n[e]&&(n[e]=t)}r("inputField",null);r("context",null);r("displayArea",null);r("button",null);r("eventName","click");r("ifFormat","%Y/%m/%d");r("daFormat","%Y/%m/%d");r("disableFunc",null);r("dateStatusFunc",n.disableFunc);r("dateText",null);r("firstDay",null);r("align","Br");r("range",[1900,2999]);r("weekNumbers",!0);r("useISO8601WeekNumbers",!1);r("flat",null);r("flatCallback",null);r("onSelect",null);r("onClose",null);r("onUpdate",null);r("date",null);r("todayDate",null);r("showsTime",!1);r("timeFormat","24");r("step",1);r("position",null);r("cache",!1);r("showOthers",!1);r("multiple",null);Calendar._TT||(Calendar._TT={});Calendar._TT.SEL_DATE="Select a date";Calendar._TT.SEL_DATE_TIME="Select a date and time";Calendar._TT.WEEK="Week";Calendar._TT.WEEK_FN=function(e){return a.format("Week {0}",e)};Calendar._TT.PREV_YEAR="Go to the previous year";Calendar._TT.PREV_MONTH="Go to the previous month";Calendar._TT.NEXT_MONTH="Go to the next month";Calendar._TT.NEXT_YEAR="Go to the next year";Calendar._TT.HOURS_FN=function(e){return a.format("{0,choice,0#{0} hours|1#{0} hour|1\u003c{0} hours}",Number.parseInt(e))};Calendar._TT.MINUTES_FN=function(e){return a.format("{0,choice,0#{0} minutes|1#{0} minute|1\u003c{0} minutes}",Number.parseInt(e))};Calendar._TT.TIME_INSTRUCTIONS="Press the button to increase the value by one";Calendar._TT.TIME_AM_PM_INSTRUCTIONS="Press the button to switch the value";Calendar._TT.CONFIRM="Confirm";Calendar._TT.CANCEL="Cancel";var l,i,o=["context","inputField","button","displayArea"];for(l in o)n[i=o[l]]instanceof e&&(n[i]=n[i][0]);var u=["inputField","displayArea","button"];for(l in u)if("string"==typeof n[i=u[l]]){var d="#"+e.escapeSelector(n[i]),s=e(n.context||document.body).find(d);n[i]=s[0]}if(!(n.flat||n.multiple||n.inputField||n.displayArea||n.button)){t.log("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code");return!1}n.firstDay&&null!==n.firstDay&&(n.firstDay=+n.firstDay);function p(t){var a=t.params;if(a.inputField){a.inputField.value=t.date.print(a.ifFormat);e(a.inputField).change()}a.displayArea&&(a.displayArea.innerHTML=t.date.print(a.daFormat));"function"==typeof a.onUpdate&&a.onUpdate(t);a.flat&&"function"==typeof a.flatCallback&&a.flatCallback(t);(t.dateClicked||a.singleClick)&&t.callCloseHandler()}if(null!=n.flat){"string"==typeof n.flat&&(n.flat=document.getElementById(n.flat));if(!n.flat){t.log("Calendar.setup:\n  Flat specified but can't find parent.");return!1}var c=new Calendar(n.firstDay,n.date,n.todayDate,n.onSelect||p);c.showsOtherMonths=n.showOthers;c.showsTime=n.showsTime;c.time24="24"==n.timeFormat;c.params=n;c.weekNumbers=n.weekNumbers;c.setRange(n.range[0],n.range[1]);c.setDateStatusHandler(n.dateStatusFunc);c.getDateText=n.dateText;n.ifFormat&&c.setDateFormat(n.ifFormat);n.inputField&&"string"==typeof n.inputField.value&&c.parseDate(n.inputField.value);c.create(n.flat);c.show();return!1}var T=n.button||n.displayArea||n.inputField;e(T).bind(n.eventName,(function(e){e.preventDefault();m()}));n.inputField&&function(){var t=e(n.inputField);n.button&&e(n.button).mousedown((function(e){e.preventDefault()}));t.keydown((function(e){var a=window.calendar;"ArrowDown"!==e.key||a&&!a.hidden||setTimeout((function(){m(t)}),1)}))}();function m(e){if(!0!==Calendar._UNSUPPORTED){var t=n.inputField||n.displayArea,a=n.inputField?n.ifFormat:n.daFormat,r=!1,l=window.calendar;l&&l.hide();t&&(t.value||t.innerHTML)&&(n.date=Date.parseDate(t.value||t.innerHTML,a));if(l&&n.cache){n.date&&l.setDate(n.date);l.hide()}else{window.calendar=l=new Calendar(n.firstDay,n.date,n.todayDate,n.onSelect||p,n.onClose||function(e){e.hide()});l.showsTime=n.showsTime;l.time24="24"==n.timeFormat;l.weekNumbers=n.weekNumbers;Date.useISO8601WeekNumbers=n.useISO8601WeekNumbers;n.useISO8601WeekNumbers&&(l.firstDayOfWeek=1);r=!0}if(n.multiple){l.multiple={};for(var i=n.multiple.length;--i>=0;){var o=n.multiple[i],u=o.print("%Y%m%d");l.multiple[u]=o}}l.showsOtherMonths=n.showOthers;l.yearStep=n.step;l.setRange(n.range[0],n.range[1]);l.params=n;l.setDateStatusHandler(n.dateStatusFunc);l.getDateText=n.dateText;l.setDateFormat(a);r&&l.create();l.refresh();l.triggerEl=e||null;n.position?l.showAt(n.position[0],n.position[1]):l.showAtElement(n.button||n.displayArea||n.inputField,n.align);return!1}alert("The JIRA Calendar does not currently support your language.")}return c}}(require("jquery"),require("jira/util/logger"),require("jira/util/formatter"));
}catch(e){WRMCB(e)};